# Лабораторна-практична робота №7

## Тема: 

Дослідження бойлерплейту фронтенд-додатку

## Мета:

Отримати практичні навички розгортання та запуску сучасного фронтенд-проекту. Детально вивчити його структуру, залежності та ключові файли, щоб зрозуміти, як інструменти (Vite, React, TypeScript) працюють разом.

## Завдання:

Розгорнути, запустити та дослідити проект-бойлерплейт, що знаходиться за посиланням: <https://github.com/RicardoValdovinos/vite-react-boilerplate>.

Основна мета - не просто запустити проєкт, а зрозуміти його внутрішню будову та логіку роботи.

### Хід роботи:

#### 1. Клонування та запуск

Розгортаємо проєкт. Клонуємо репозиторій на свій комп'ютер та встановлюємо усі залежності за допомогою команди:

```bash
pnpm install
```

і налаштовуємо його командою:

```bash
pnpm run setup
```

Запускаємо у режимі розробки. Виконуємо команду:

```bash
pnpm run dev
```

У терміналі отримуємо локальний адрес

>![placeholder](<https://github.com/gn4r4/vite-react-boilerplate/blob/main/images/workshop7/1.png?raw=true>)

Відкриваємо посилання у браузері. В результаті ми повинні побачити стартову сторінку додатку без помилок у консолі.

>![placeholder](<https://github.com/gn4r4/vite-react-boilerplate/blob/main/images/workshop7/2.png?raw=true>)

#### 2. Детальне вивчення структури

Відкриваємо проєкт у нашому редакторі коду та аналізуємо ключові файли та директорії, щоб зрозуміти їхню роль.

**dependencies -** Основа додатку. Це бібліотеки, які потраплять у фінальний бандл і потрібні для роботи програми в браузері, а саме:

- **Core (Ядро):**
  - `react`, `react-dom` (**v19**): Використовується найновіша 19-та версія React (ще досить свіжа).
  - `@tanstack/react-router`: Сучасний роутер з повною підтримкою `TypeScript` (`type-safe routing`), який стає стандартом замість `React Router`.
- **Управління станом та даними:**
  - `@tanstack/react-query`: Стандарт індустрії для асинхронного управління станом (кешування запитів до `API`).
  - `zustand`: Легковажний менеджер глобального стану (простіша альтернатива `Redux`).
- **Робота з формами:**
  - `react-hook-form`: Найпопулярніша бібліотека для форм.
  - `zod`: Схема-валідація даних.
  - `@hookform/resolvers`: Зв'язує `Zod` з `React Hook Form` для валідації.
- **UI та Візуалізація:**
  - `@tanstack/react-table`: `"Headless"` бібліотека для побудови складних таблиць (тільки логіка, без стилів).
  - `@nivo/\*` (`bar`, `line`, `pie`): Бібліотека для побудови красивих графіків та діаграм на базі `D3.js`.
- **Інше:**
  - `i18next` екосистема: Для мультимовності (перекладу) додатку.
  - `dayjs`: Легка бібліотека для роботи з датами (альтернатива `Moment.js`).

**devDependencies -** Інструменти розробки. Це інструменти, які потрібні лише вам під час написання коду, тестування та збірки.

- **Збірка та Компіляція:**
  - `vite`: Надшвидкий бандлер.
  - `@vitejs/plugin-react-swc`: Використовує `SWC` (написаний на `Rust`) замість `Babel` для ще швидшої компіляції.
  - `typescript`: Мова програмування.
- **Стилізація:**
  - `tailwindcss` (v4): Нова, ще швидша версія `CSS-фреймворку`.
  - `autoprefixer`: Додає вендорні префікси для CSS.
  - `@headlessui/react`: Готові доступні `UI` компоненти (модали, дропдауни) без стилів, що ідеально лягають на `Tailwind`.
- **Якість коду (Linting & Formatting):**
  - `eslint` (+ багато плагінів): Шукає помилки в коді. Тут налаштовано дуже суворо (`Unicorn`, `React Hooks`, `A11y`).
  - `prettier`: Форматує код (відступи, коми).
  - `husky` + `commitlint`: Перевіряє код та повідомлення комітів перед тим, як ви зможете зробити `git push`.
- **Тестування:**
  - `vitest`: Швидкий раннер для юніт-тестів (сумісний з `Jest`, але працює на `Vite`).
  - `@playwright/test`: Потужний інструмент для `E2E` (`End-to-End`) тестування (імітує дії реального користувача в браузері).
  - `@testing-library/\*`: Утиліти для тестування `React` компонентів.
- **Документація:**
- storybook: Середовище для ізольованої розробки та демонстрації UI-компонентів.

**scripts -** Команди запуску. Ось що робить кожна команда, коли ви вводите npm run &lt;command&gt;:

- **Основні:**
  - `dev` (`vite`): Запускає локальний сервер розробки. Зміни в коді оновлюються миттєво (`HMR`).
  - `build` (`tsc && vite build`): **Важливо!** Спочатку запускає tsc (`TypeScript Compiler`) для перевірки типів. Якщо помилок немає, запускає `vite build` для створення оптимізованих файлів у папку `dist` для продакшну.
  - `preview` (`vite preview`): Запускає локальний сервер, щоб подивитися на результат команди `build`.
- **Тестування:**
  - `test` (`vitest run src/ && playwright test`): Запускає **`ВСІ`** тести одразу (і модульні, і `E2E`).
  - `test:unit`: Запускає тільки модульні тести (швидко).
  - `test:e2e`: Запускає тільки `Playwright` (повільніше, перевіряє в браузері).
  - `test:unit:coverage`: Показує, який відсоток коду покритий тестами.
- **Якість коду:**
  - `lint`: Перевіряє код за допомогою `ESLint`. Прапор `--max-warnings 0` значить, що процес впаде навіть при наявності попереджень (`warning`).
  - `lint:fix`: Намагається автоматично виправити прості помилки лінтера.
  - `format`: Форматує всі `.ts` та `.tsx` файли через `Prettier`.
- **Storybook:**
  - `storybook`: Запускає інтерфейс `Storybook` на порту `6006`.
- **Git / DevOps:**
  - `setup`: Корисна команда для першого запуску (`"one-shot"`). Ініціалізує `git`, налаштовує `husky` та встановлює браузери для `playwright`.
  - `commitizen`: Запускає інтерактивний інтерфейс для створення коміту (допомагає писати правильні повідомлення типу `feat:`, `fix:`).

**vite.config.ts -** Серце конфігурації. Цей файл керує тим, як Vite збирає та обслуговує ваш проект.

- **Плагіни (plugins):**
  - `react()`: Використовує `SWC` для дуже швидкої компіляції `React`.
  - `tailwindcss()`: Інтеграція **`Tailwind CSS v4`** як плагіна `Vite` (це нововведення 4-ї версії, раніше це робилося через `PostCSS`).
  - `TanStackRouterVite()`: **Ключовий момент!** Цей плагін автоматично сканує ваші файли та генерує дерево маршрутів (`routeTree.gen.ts`). Вам не потрібно писати маршрути вручну - файлова система _стає_ вашим роутером.
  - `viteStaticCopy`: Копіює папку з перекладами (`locales`) у фінальну папку збірки (`dist`), щоб `i18next` міг знайти ці файли на продакшені.
- **Тестування (`test`):** Тут же налаштований `Vitest` (середовище `jsdom`), що дозволяє запускати тести без окремого конфігураційного файлу.

**src/main.tsx -** Точка входу. Це місце, де Java`Script починає виконуватися в браузері.

- **Ініціалізація Роутера:**
  - Імпортується `routeTree.gen.ts` (файл, згенерований плагіном `Vite`).
  - Створюється екземпляр `router`.
  - **`TypeScript Magic`:** Блок declare module `"@tanstack/react-router"` розширює типи. Це дає вам автодоповнення (`IntelliSense`) для всіх маршрутів у проекті. Якщо ви спробуєте перейти на неіснуючу сторінку в коді, `TypeScript` підсвітить це як помилку.
- **Монтування (`ReactDOM`):**
  - Код знаходить елемент `<div id="root">` у вашому `HTML`.
  - `React.Suspense`: Обгортає додаток, щоб показувати `"loading"` (завантаження), поки вантажаться переклади або лениві компоненти.
  - Глобальні імпорти: Тут підключаються стилі (`tailwind.css`) та конфігурація мов (`i18n`).

**src/routes/index.ts -** Маршрутизація (`File-Based Routing`). У `TanStack Router` структура файлів визначає `URL`.

- **Логіка:** Виклик `createFileRoute`("/") каже роутеру: "Цей файл відповідає за головну сторінку (корінь сайту)".
- **Зв'язок:** У параметрі `component`: Home ви вказуєте, що коли користувач заходить на /, треба відмалювати компонент `Home`.

Вам не потрібно реєструвати цей файл у `main.tsx` вручну. Плагін `Vite` сам знайде цей файл і додасть його до `routeTree.gen.ts`.

**src/pages/Home.tsx -** `UI` Компонент. Це звичайний React-компонент, який відповідає за відображення сторінки.

- **Логіка:**
  - Використовує хук `useTranslation` для роботи з мультимовністю.
  - Функція `onTranslateButtonClick` динамічно змінює мову додатку без перезавантаження сторінки.
- **Стилізація:** Використовуються `utility-класи` `Tailwind` (наприклад, `w-screen h-screen flex flex-col` для центрування контенту на весь екран). Стилі пишуться прямо в `className`.

**src/styles/tailwind.css -** Глобальні стилі. Тут все дуже лаконічно, що характерно для **`Tailwind CSS v4`**.

- `@import "tailwindcss";`: Це єдиний рядок, який потрібен. На відміну від `v3`, де ми писали `@tailwind base`; `@tailwind components;` `@tailwind utilities;`, у новій версії все це включено в один імпорт.
- Саме цей файл імпортується в `main.tsx`, завдяки чому стилі `Tailwind` доступні у всьому проекті.

#### 3. Практична модифікація

Щоб переконатись, що ми розуміємо робочий процес, вносимо невелику зміну в код. Відкриваємо файл `src/pages/Home.tsx`, вносимо будь-яку зміну до файлу та зберігаємо. Переходимо до браузера і переконуємось, що зміни миттєво відобразились без перезавантаження сторінки. Це демонструємо роботу `Hot Module Replacement` (`HMR`) у `Vite`.

>![placeholder](<https://github.com/gn4r4/vite-react-boilerplate/blob/main/images/workshop7/3.png?raw=true>)

>![placeholder](<https://github.com/gn4r4/vite-react-boilerplate/blob/main/images/workshop7/4.png?raw=true>)
